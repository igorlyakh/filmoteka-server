# üé• Filmoteka Server

**Filmoteka Server** ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ —Ñ–∏–ª—å–º–æ–≤ –∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç—ã, –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∏–ª—å–º—ã, –¥–µ–ª–∏—Ç—å—Å—è –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏ –∏ –≤—ã–±–∏—Ä–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∏–ª—å–º –∏–∑ –æ–±—â–µ–≥–æ —Å–ø–∏—Å–∫–∞.

---

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π:**

  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥.
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤.
  - –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–∞–º–∏:**

  - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç.
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–º–Ω–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞–º–∏:**

  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–∞—Ö.
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∏–ª—å–º–æ–≤ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ.

- **–†–µ–∞–ª—Ç–∞–π–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ:**

  - –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∏–ª—å–º–æ–≤, –∞ —Ç–∞–∫–∂–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–º–Ω–∞—Ç—ã.

- **Swagger-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**  
  –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî **`/api/docs`**.

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π/filmoteka-server.git
   cd filmoteka-server
   ```
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é Yarn:
   ```bash
   yarn install
   ```
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:  
   –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª `.env.example`. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –≤ `.env`. –ó–∞—Ç–µ–º —É–∫–∞–∂–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

   - `DATABASE_URL` ‚Äî –°—Å—ã–ª–∫–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL.
   - `JWT_ACCESS_SECRET` ‚Äî –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Access-—Ç–æ–∫–µ–Ω–æ–≤.
   - `JWT_REFRESH_SECRET` ‚Äî –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Refresh-—Ç–æ–∫–µ–Ω–æ–≤.
   - `COOKIE_SECRET` ‚Äî –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å cookie.
   - `PORT` ‚Äî –ü–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω —Å–µ—Ä–≤–µ—Ä.

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
   ```bash
   yarn prisma migrate dev
   ```
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
   ```bash
   yarn dev
   ```

## üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**

- **POST** `/api/auth/login` ‚Äî –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **POST** `/api/auth/registration` ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **POST** `/api/auth/refresh` ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤.
- **POST** `/api/auth/logout` ‚Äî –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### 2. **–ö–æ–º–Ω–∞—Ç—ã**

- **POST** `/api/room` ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã.
- **GET** `/api/room` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **DELETE** `/api/room` ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.
- **PATCH** `/api/room/:roomId` ‚Äî –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –∫–æ–º–Ω–∞—Ç—É.
- **PATCH** `/api/room/kick/:roomId` ‚Äî –£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∫–æ–º–Ω–∞—Ç—ã.

### 3. **–§–∏–ª—å–º—ã**

- **POST** `/api/:roomId/movie` ‚Äî –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º –≤ –∫–æ–º–Ω–∞—Ç—É.
- **GET** `/api/:roomId/movie` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Ñ–∏–ª—å–º—ã –∫–æ–º–Ω–∞—Ç—ã.
- **DELETE** `/api/:roomId/movie` ‚Äî –£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å–º –∏–∑ –∫–æ–º–Ω–∞—Ç—ã.

### 4. **Swagger –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

- **GET** `/api/docs` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ API (Swagger).

## ‚ö° WebSocket –°–æ–±—ã—Ç–∏—è

- **addMovie** ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –≤ –∫–æ–º–Ω–∞—Ç—É.
- **deleteMovie** ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã.
- **addToRoom** ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ –∫–æ–º–Ω–∞—Ç—É.
- **kickFromRoom** ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã.

## üìù –°–∫—Ä–∏–ø—Ç—ã

- **`yarn build`** ‚Äî –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞.
- **`yarn format`** ‚Äî –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Prettier.
- **`yarn start`** ‚Äî –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∂–∏–º–µ.
- **`yarn dev`** ‚Äî –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
- **`yarn start:debug`** ‚Äî –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏.
- **`yarn start:prod`** ‚Äî –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω-—Ä–µ–∂–∏–º–µ (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤).
- **`yarn lint`** ‚Äî –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–∏–Ω–≥–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ESLint.
- **`yarn test`** ‚Äî –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤.
- **`yarn test:watch`** ‚Äî –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è.
- **`yarn test:cov`** ‚Äî –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º.
- **`yarn test:debug`** ‚Äî –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –æ—Ç–ª–∞–¥—á–∏–∫–æ–º.
- **`yarn test:e2e`** ‚Äî –ó–∞–ø—É—Å–∫ —ç–Ω–¥-—Ç—É-—ç–Ω–¥ —Ç–µ—Å—Ç–æ–≤.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                                                                                        | –û–ø–∏—Å–∞–Ω–∏–µ                                          |
| ------------------------------------------------------------------------------------------------- | ------------------------------------------------- |
| ![NestJS](https://img.shields.io/badge/-NestJS-E0234E?logo=nestjs&logoColor=white)                | –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ TypeScript. |
| ![Prisma](https://img.shields.io/badge/-Prisma-2D3748?logo=prisma&logoColor=white)                | ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL.                      |
| ![Socket.IO](https://img.shields.io/badge/-Socket.IO-010101?logo=socketdotio&logoColor=white)     | –†–µ–∞–ª—Ç–∞–π–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ WebSocket.          |
| ![PostgreSQL](https://img.shields.io/badge/-PostgreSQL-336791?logo=postgresql&logoColor=white)    | –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö.                          |
| ![TypeScript](https://img.shields.io/badge/-TypeScript-3178C6?logo=typescript&logoColor=white)    | –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.                         |
| ![JWT](https://img.shields.io/badge/-JWT-000000?logo=jsonwebtokens&logoColor=white)               | –ú–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.       |
| ![Passport](https://img.shields.io/badge/-Passport-34E27A?logo=passport&logoColor=white)          | Middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.                    |
| ![Passport-JWT](https://img.shields.io/badge/-Passport--JWT-6E7783?logo=passport&logoColor=white) | –°—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏ –≤ Passport.   |
| ![bcrypt](https://img.shields.io/badge/-bcrypt-003A70?logo=data:image/png;base64,...)             | –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π.               |

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ [MIT License](LICENSE).
